<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"/><meta name="theme-color" content="#222"/><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"/><meta name="renderer" content="webkit"/><link rel="icon" type="image/ico" sizes="32x32" href="/assets/favicon.ico"/><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"/><link rel="alternate" href="/rss.xml" title="Nana7ha's Café Stella" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="Nana7ha's Café Stella" type="application/atom+xml"><link rel="alternate" type="application/json" title="Nana7ha's Café Stella" href="https://cwlrin.wiki/feed.json"/><link rel="preconnect" href="https://s4.zstatic.net"/><link rel="preconnect" href="https://at.alicdn.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7CFredericka%20the%20Great:400,400italic,700,700italic%7CNoto%20Serif%20JP:400,400italic,700,700italic%7CNoto%20Serif%20SC:400,400italic,700,700italic%7CInconsolata:400,400italic,700,700italic&display=swap&subset=latin,latin-ext" media="none" onload="this.media&#x3D;&#39;all&#39;"><link rel="stylesheet" href="/css/app.css?v=0.4.20"><link rel="modulepreload" href="/js/chunk-7SEFNKBW.js"></link><link rel="modulepreload" href="/js/chunk-B6LR4GZ7.js"></link><link rel="modulepreload" href="/js/chunk-R2ID445Y.js"></link><link rel="modulepreload" href="/js/copy-tex-6KGJ4I7N.js"></link><link rel="modulepreload" href="/js/index.esm-77JWK77F.js"></link><link rel="modulepreload" href="/js/post-NFR2DBU7.js"></link><link rel="modulepreload" href="/js/quicklink-KETDXBC3.js"></link><link rel="modulepreload" href="/js/siteInit.js"></link><link rel="preload" href="https://dlink.host/1drv/aHR0cHM6Ly8xZHJ2Lm1zL2kvYy9iZGU1MWU2MjVlZjhmY2M1L0VYQUMxYzhHSklSSGlmby1Ydzkyd3ZzQlFzR3pOOUFHajVGZnFGb0duUWpITWc_ZT1DZ2trRGo.png" as="image" fetchpriority="high"><meta name="keywords" content="C"/><meta name="description" content="技术与美日新月异"/><link rel="canonical" href="https://cwlrin.wiki/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E5%A4%B4%E6%96%87%E4%BB%B6/"><title>C 语言头文件</title><meta name="generator" content="Hexo 7.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">C 语言头文件</h1><div class="meta"><span class="item" title="创建时间：2020-02-22 21:59:24"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2020-02-22T21:59:24+08:00">2020-02-22</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>8.3k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>8 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">七葉の喫茶ステラ</a></li></ul><ul class="right" id="rightNav"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><img src="https://dlink.host/1drv/aHR0cHM6Ly8xZHJ2Lm1zL2kvYy9iZGU1MWU2MjVlZjhmY2M1L0VYQUMxYzhHSklSSGlmby1Ydzkyd3ZzQlFzR3pOOUFHajVGZnFGb0duUWpITWc_ZT1DZ2trRGo.png" loading="eager" decoding="async" fetchpriority="high" alt="Nana7ha's Café Stella"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemListElement itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">首页</a></span><i class="ic i-angle-right"></i><span itemprop="itemListElement" itemscope="itemscope" itemtype="https://schema.org/ListItem"><a href="/categories/c-cpp/" itemprop="item" rel="index" title="分类于C/C++"><span itemprop="name">C/C++<meta itemprop="position" content="0"/></span></a></span><i class="ic i-angle-right"></i><span class="current" itemprop="itemListElement" itemscope="itemscope" itemtype="https://schema.org/ListItem"><a href="/categories/c-cpp/c-basic/" itemprop="item" rel="index" title="分类于C 语言基础"><span itemprop="name">C 语言基础<meta itemprop="position" content="1"/></span></a></span></div><article class="post block" itemscope="itemscope" itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwlrin.wiki/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E5%A4%B4%E6%96%87%E4%BB%B6/"/><span hidden="hidden" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="image" content="/assets/avatar.jpg"/><meta itemprop="name" content="樱小路七叶"/><meta itemprop="description" content=", 技术与美日新月异"/></span><span hidden="hidden" itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Nana7ha's Café Stella"/></span><div class="body md" itemprop="articleBody"><h2 id="c-语言的编译过程"><a class="anchor" href="#c-语言的编译过程">#</a> C 语言的编译过程</h2>
<p><strong>编译过程</strong> 可以被分为几个阶段，每个阶段都由不同的工具或编译器的组件执行特定的任务：</p>
<ol>
<li><strong>预处理</strong>：在这个阶段，预处理器执行文本替换，如宏展开和文件包含，同时删除注释。</li>
<li><strong>编译</strong>：编译器进行语法和语义分析，确保代码符合语言规范，并且是有意义的。接着，编译器对代码进行优化，以提高执行效率。</li>
<li><strong>汇编</strong>：编译器将优化后的代码转换成汇编代码，这是一种接近机器语言的低级表示形式，但仍包含一些人类可读的助记符。</li>
<li><strong>链接</strong>：链接器将编译生成的目标文件（ .o 或.obj）与其他库和目标文件链接在一起，生成最终的可执行文件或库文件。</li>
</ol>
<p><strong>目标文件</strong> 是编译过程中的一个中间产物，包含汇编器转换后的机器指令，已经是二进制格式，对人来说难以阅读。</p>
<p><strong>编译</strong> 是将人类可读的高级语言代码转换成计算机可执行的低级机器语言代码的转换过程。这个过程涉及多个步骤，每个步骤都对最终生成的代码的性能和效率有重要影响。</p>
<p>在 C 语言的编译过程中，编译器将源代码转换成一个目标文件（如  <code>.o</code>  或  <code>.obj</code>  文件）。这个目标文件包含了源代码对应的机器代码，但它本身并不是一个可执行程序。原因在于，源代码中可能引用了外部的函数或变量，而这些外部定义在单独编译时尚未存在。</p>
<p>例如，如果源文件包含了标准库头文件  <code>&lt;stdio.h&gt;</code>  并调用了  <code>printf</code>  函数，它实际上只包含了  <code>printf</code>  的声明，而没有包含其定义。没有函数的定义，程序就无法执行该函数的调用，因此仅有目标文件是不够的。</p>
<p><strong>链接过程</strong> 是编译后的下一步，它负责将目标文件与它所依赖的外部函数和变量的实现链接起来。对于标准库函数如  <code>printf</code> ，链接器会从标准库提供的相关文件中找到其定义，并完成链接过程。这个过程对于程序员通常是透明的，因为编译器和链接器会自动处理这些细节。</p>
<p>需要注意，函数和变量的声明可以在多个地方出现，但它们的定义在程序中只能有一次。多次定义会导致编译错误。</p>
<h3 id="预处理阶段"><a class="anchor" href="#预处理阶段">#</a> 预处理阶段</h3>
<p>C 语言的编译过程开始于预处理阶段，预处理器在这个阶段主要执行两项任务：</p>
<ol>
<li><strong>执行预处理指令</strong>：这些指令提供了多种编译时功能，如文件包含、宏定义等。</li>
<li><strong>删除代码中的注释</strong>：预处理器会移除源代码中的所有注释，以便进行下一步的编译。</li>
</ol>
<p>预处理后生成的文件被称为 “预处理后的源代码文件”，它与原始源代码文件具有相同的扩展名。</p>
<h3 id="预处理指令"><a class="anchor" href="#预处理指令">#</a> 预处理指令</h3>
<ol>
<li><strong>#include</strong>：此指令用于包含头文件，头文件中通常包含了函数声明、结构体或联合体类型的定义、宏定义以及类型别名等。
<ul>
<li>函数声明提供了函数的原型，包括返回类型、函数名和参数列表，但不包含函数的实现。</li>
<li>函数定义包含了函数的完整实现，使得函数可以在程序中被调用和执行。</li>
<li>使用  <code>#include</code>  指令可以视为将头文件的内容复制到指令所在位置。</li>
</ul>
</li>
<li><strong>#include &lt;&gt;</strong>：使用尖括号  <code>&lt;&gt;</code>  指示编译器在标准库目录中搜索头文件，通常用于包含官方提供的标准库头文件。</li>
<li><strong>#include &quot;&quot;</strong>：使用双引号  <code>&quot;&quot;</code>  指示编译器首先在当前目录下搜索头文件，如果当前目录下不存在，则在系统目录中搜索，这通常用于包含用户自定义的头文件。</li>
<li><strong>#define</strong>：此指令用于定义宏，它可以定义宏常量或宏函数。宏定义时推荐使用全部大写字母并用下划线分隔的方式命名，以增强可读性和避免与变量名冲突。</li>
</ol>
<h3 id="编译和链接错误"><a class="anchor" href="#编译和链接错误">#</a> 编译和链接错误</h3>
<p>在 C 语言程序的编译和链接过程中，可能会遇到不同类型的错误，这些错误分别由编译器和链接器抛出：</p>
<ol>
<li><strong>编译错误</strong>：这些错误发生在预处理、编译或汇编的阶段，通常由语法错误导致。例如：
<ul>
<li>忘记在语句末尾添加分号；</li>
<li>拼写错误，如将关键字或标识符错误地书写；</li>
<li>包含不存在的头文件。</li>
</ul>
</li>
<li><strong>链接错误</strong>：这些错误发生在链接阶段，通常与函数调用有关。常见的原因包括：
<ul>
<li>函数名拼写错误，导致链接器找不到该函数的定义；</li>
<li>忘记包含必要的头文件，而这些头文件中含有所需函数的声明；</li>
<li>只包含了头文件，但未提供函数的定义，导致链接器无法找到函数的实现。</li>
</ul>
</li>
</ol>
<p>为了避免这些错误，程序员需要仔细检查代码的语法正确性，并确保所有外部函数和变量都有相应的声明和定义。此外，使用编译器的警告和错误信息可以帮助识别和修复这些问题。</p>
<h2 id="文件包含"><a class="anchor" href="#文件包含">#</a> 文件包含</h2>
<h3 id="头文件"><a class="anchor" href="#头文件">#</a> 头文件</h3>
<p>头文件（以 .h 为扩展名）通常包含了程序中所需函数的声明。这些声明为编译器提供了必要的信息，以便正确编译程序。然而，并非总是需要引入整个头文件来使用特定的函数。</p>
<p>例如，如果只需要使用  <code>puts()</code>  函数，可以将该函数的声明从  <code>&lt;stdio.h&gt;</code>  头文件中提取出来，并直接放置在源代码文件的顶部，从而避免引入整个头文件。</p>
<p>这种方法可以减少编译时的依赖，提高编译效率，在大型项目中，通过减少不必要的头文件包含，可以简化编译过程并减少潜在的编译错误。</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> __cdecl <span class="token function">puts</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token keyword">const</span> <span class="token operator">*</span>_Buffer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不调用头文件的情况下，使用 puts 函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"hello world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//hello world 可正常打印出来</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="头文件展开"><a class="anchor" href="#头文件展开">#</a> 头文件展开</h3>
<p>头文件的展开过程涉及提取头文件内的所有函数声明，并将其放置在主函数（ <code>main ()</code> ）的上方。值得注意的是，头文件可能相互嵌套，即一个头文件中可能包含对其他头文件的引用，这使得展开过程本质上是递归的。</p>
<p>可以使用 GCC 编译器执行头文件的展开，。以  <code>file_include.c</code>  文件中包含的  <code>#include &lt;stdio.h&gt;</code>  为例（如果  <code>stdio.h</code>  内还包含了其他头文件，这些也会被递归展开），可以通过在终端中执行命令</p>
<figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td data-command="[root@localhost] $"></td><td><pre>gcc <span class="token parameter variable">-E</span> file_include.c <span class="token parameter variable">-o</span> file_include.i</pre></td></tr></table></figure><p>用来生成一个展开后的中间文件  <code>file_include.i</code> 。该文件包含了原本头文件中的所有内容，可以被重命名为  <code>file_include.i.c</code> ，并使用 MSVC 编译器进行编译，以获得与原始  <code>.c</code>  文件相同的执行结果。</p>
<p>然而，如果直接使用 GCC 编译  <code>file_include.i.c</code>  可能会遇到错误，具体原因尚待进一步探究。</p>
<h3 id="自定义头文件"><a class="anchor" href="#自定义头文件">#</a> 自定义头文件</h3>
<p>在 C 语言编程中，使用双引号 &quot;&quot; 括起来的  <code>#include</code>  指令用于指定相对或绝对路径来包含头文件。例如， <code>#include&quot;../include/factorial.h&quot;</code>  表示当前源文件将包含其上级目录中的  <code>include</code>  文件夹里的  <code>factorial.h</code>  头文件。这种方式允许程序员引入项目结构中任意位置的自定义头文件。</p>
<p>尖括号 &lt;&gt; 内的  <code>#include</code>  指令用于包含标准库或第三方库的头文件。这些头文件通常位于编译器的默认搜索路径或项目配置的库路径中。例如， <code>#include &lt;stdio.h&gt;</code>  会引入标准输入输出库的头文件，而  <code>#include &lt;some_external_library.h &gt;</code>  则可能引入项目中引用的外部库的头文件。</p>
<h2 id="宏函数"><a class="anchor" href="#宏函数">#</a> 宏函数</h2>
<h3 id="宏函数的概念"><a class="anchor" href="#宏函数的概念">#</a> 宏函数的概念</h3>
<p>宏函数是一种接受输入参数并根据这些参数计算结果的宏定义。它们通过预处理器实现，允许在编译时直接嵌入代码，从而提高了程序的效率。</p>
<p>在 C 语言的预处理阶段，宏定义通过 “文本替换” 机制实现，这是一种直接的文本替换过程，不涉及类型检查或范围验证。</p>
<p><strong>宏常量</strong>：它们为字面值常量提供了一个别名，其本质与直接使用字面值常量相同，但提高了代码的可读性和可维护性。</p>
<p>在定义宏函数时，需要注意以下几点：</p>
<ol>
<li><strong>确保运算优先级</strong>：由于宏函数是文本替换，可能需要在适当的位置添加括号来确保正确的运算顺序。</li>
<li><strong>参数括号化</strong>：每个参数在宏函数的表达式中都应该被括号包围，以避免由于宏扩展导致的运算符优先级问题。</li>
<li><strong>整体括号化</strong>：宏函数的整个表达式也应该被括号包围，确保在宏展开后表达式的完整性和正确性。</li>
</ol>
<p>例如，定义一个求两个数中较大值的宏函数  <code>MAX</code> ，可以使用以下语法：  <code>#define MAX(a, b) ((a) &gt; (b)) ? (a) : (b)</code></p>
<p>这个宏定义使用了条件运算符（也称为三元运算符），它基于比较结果选择两个参数中的较大值。当宏函数  <code>MAX</code>  被调用并传入两个参数时，预处理器会将宏调用替换为相应的条件表达式。</p>
<h3 id="宏函数的连续调用"><a class="anchor" href="#宏函数的连续调用">#</a> 宏函数的连续调用</h3>
<p>宏函数的嵌套调用需要特别注意，因为宏函数在预处理阶段进行简单的文本替换，不会自动考虑 C 语言的运算符优先级规则。这可能导致计算结果不符合预期。</p>
<p>例如，定义了一个简单的比较宏函数 MAX，用于返回两个值中较大的一个：</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAX</span> <span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> a <span class="token operator">></span> b <span class="token operator">?</span> a <span class="token operator">:</span> b<span class="token punctuation">&#125;</span></span></span></pre></td></tr></table></figure><p>如果直接嵌套调用这个宏函数，如  <code>MAX (1, MAX (3, 4))</code> ，由于缺少必要的括号，将导致运算符优先级混乱，从而得到错误的结果。</p>
<p>正确的做法是在宏函数的定义中明确使用括号，以确保运算的逻辑顺序，如下所示：</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAX</span> <span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span></span></pre></td></tr></table></figure><p>这样，即使宏函数被嵌套调用，每个参数的计算也将被正确地限制在括号内，从而保证得到预期的结果，例如  <code>MAX (1, MAX (3, 4))</code>  将会得到正确的值 4。</p>
<h3 id="定义多行宏"><a class="anchor" href="#定义多行宏">#</a> 定义多行宏</h3>
<p>若需定义一个跨越多行的宏，可以使用反斜杠  <code>\</code>  来实现行的连接。这种技术允许宏定义在视觉上和逻辑上分割成多行，同时确保预处理器能够正确地将它们视为一个连续的宏定义。</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 定义多行宏</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">IS_HEX_CHARACTER</span><span class="token expression"><span class="token punctuation">(</span>ch<span class="token punctuation">)</span> </span><span class="token punctuation">\</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token operator">>=</span> </span><span class="token char">'0'</span> <span class="token expression"><span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> </span><span class="token char">'9'</span><span class="token expression"><span class="token punctuation">)</span> <span class="token operator">||</span> </span><span class="token punctuation">\</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token operator">>=</span> </span><span class="token char">'A'</span> <span class="token expression"><span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> </span><span class="token char">'F'</span><span class="token expression"><span class="token punctuation">)</span> <span class="token operator">||</span> </span><span class="token punctuation">\</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token operator">>=</span> </span><span class="token char">'a'</span> <span class="token expression"><span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> </span><span class="token char">'f'</span><span class="token expression"><span class="token punctuation">)</span></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"is A a hex character? %d\n"</span><span class="token punctuation">,</span> <span class="token function">IS_HEX_CHARACTER</span><span class="token punctuation">(</span><span class="token char">'A'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="宏与函数的区别"><a class="anchor" href="#宏与函数的区别">#</a> 宏与函数的区别</h3>
<table>
<thead>
<tr>
<th>特性</th>
<th>宏</th>
<th>函数</th>
</tr>
</thead>
<tbody>
<tr>
<td>代码插入方式</td>
<td>每次使用时，宏代码都被插入到程序中</td>
<td>函数代码只出现于一个地方；每次使用这个函数时，调用用那个地方的一份代码</td>
</tr>
<tr>
<td>代码长度</td>
<td>除了非常小的宏之外，程序的长度将大幅度增长</td>
<td>代码长度增长幅度较小</td>
</tr>
<tr>
<td>操作符优先级</td>
<td>操作符优先级可能会产生不可预料的结果</td>
<td>表达式的求值结果更容易预测</td>
</tr>
<tr>
<td>参数求值</td>
<td>参数的求值在所有周围表达式的上下文环境里，除非加上括号，否则邻近的操作符优先级可能会导致多次求值</td>
<td>参数在函数被调用前只求值一次。在函数中多次使用参数可能导致多次求值的问题</td>
</tr>
<tr>
<td>参数类型</td>
<td>宏与类型无关。只要对参数的操作是合法的，它可以适用于任何参数</td>
<td>函数的参数是与类型有关的。如果参数的类型不同，就需要使用不同的函数，即使它们执行的任务是相同的</td>
</tr>
</tbody>
</table>
<h2 id="条件编译"><a class="anchor" href="#条件编译">#</a> 条件编译</h2>
<h3 id="ifndef-ifdef-if"><a class="anchor" href="#ifndef-ifdef-if">#</a>  <code>#ifndef</code> ,  <code>#ifdef</code> ,  <code>#if</code></h3>
<p>在 C 语言的预处理指令中， <code>#ifndef</code>  代表 “如果未定义”（if not defined），用于检查某个宏是否尚未定义。如果指定的宏未定义，则条件成立，后续代码块将被包含在编译过程中。<br />
 <code>#ifdef</code>  代表 “如果已定义”（if defined），它用于检查某个宏是否已经被定义。如果指定的宏已经定义，则条件成立，后续代码块将被包含。<br />
 <code>#if</code>  指令可以与  <code>defined ()</code>  函数一起使用，来检查宏是否已定义。 <code>if defined (MACRO)</code>  与  <code>#ifdef MACRO</code>  是等价的，都用于在宏  <code>MACRO</code>  已定义时包含后续代码块。<br />
所有这些条件编译指令都需要以  <code>#endif</code>  指令结束， <code>#endif</code>  标志着条件编译块的结束。</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 头文件中必有的条件编译，以免一些头文件被重复引用</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">INCLUDE_FACTORIAL_H</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">INCLUDE_FACTORIAL_H</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">unsigned</span> <span class="token keyword">int</span> <span class="token function">Factorial</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">unsigned</span> <span class="token keyword">int</span> <span class="token function">FactorialByIteration</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// INCLUDE_FACTORIAL_H</span></span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// #if 的用法</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">DEBUG </span><span class="token comment">//  == if defined(DEBUG)</span></span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token function">puts</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span></pre></td></tr></table></figure><h3 id="利用宏打印调试信息"><a class="anchor" href="#利用宏打印调试信息">#</a> 利用宏打印调试信息</h3>
<p>在 C 语言程序开发中，宏可以用于控制调试信息的输出。</p>
<p>例如，通过宏  <code>DEBUG</code>  的存在与否，可以决定是否执行特定的打印操作。当宏  <code>DEBUG</code>  未被定义时，调用  <code>Dump</code>  函数将不会输出任何信息；而一旦定义了  <code>DEBUG</code> ，则  <code>Dump</code>  函数将正常输出传入的消息字符串。</p>
<p>以下是一个  <code>Dump</code>  函数的示例实现，它根据宏  <code>DEBUG</code>  的定义情况来决定是否执行打印操作：</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DEBUG</span>  <span class="token comment">// 该宏定义存在的情况下，输出结果为 start! hello end</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 该宏定义不存在的情况下，输出结果为 hello</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">void</span> <span class="token function">Dump</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>message<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">DEBUG</span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">puts</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token function">Dump</span><span class="token punctuation">(</span><span class="token string">"start!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"hello\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token function">Dump</span><span class="token punctuation">(</span><span class="token string">"end"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>在  <code>main</code>  函数中，调用  <code>Dump</code>  函数前后分别打印了 &quot;hello&quot;，但只有定义了  <code>DEBUG</code>  时，&quot;start!&quot; 和 &quot;end&quot; 才会被打印出来。</p>
<p>此外，宏  <code>DEBUG</code>  的定义不仅限于在源代码中进行，还可以通过构建系统如 CMake 来控制。通过修改  <code>CMakeLists.txt</code>  文件，可以在构建过程中定义或不定义宏  <code>DEBUG</code> 。</p>
<p>例如，以下 CMake 脚本片段展示了如何为项目中的可执行文件添加宏定义：</p>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 添加该句即意味着定义了宏 DEBUG</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">target_compile_definitions</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span>name<span class="token punctuation">&#125;</span> <span class="token namespace">PUBLIC</span> DEBUG<span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="一段代码在-c-语言下定义还是在-c-语言下定义"><a class="anchor" href="#一段代码在-c-语言下定义还是在-c-语言下定义">#</a> 一段代码在 C 语言下定义还是在 C++ 语言下定义？</h3>
<p>确定代码是在 C 语言还是 C++ 语言环境下定义，可以通过检查特定的语言特性来实现。</p>
<p>例如，在 C++ 中，为了确保代码能够与 C 代码兼容，可能会使用  <code>extern &quot;C&quot;</code>  链接说明符。这个说明符指示编译器在指定的代码块内使用 C 语言的链接规则，而不是 C++ 的名称修饰（name mangling）规则。因此，如果代码段包含  <code>extern &quot;C&quot;</code> ，它很可能是为了在 C++ 环境中使用而定义的。</p>
<p>相反，在纯 C 语言环境中编写的代码不会包含  <code>extern &quot;C&quot;</code> ，因为 C 语言不存在名称修饰的问题。C 语言的编译器默认使用 C 语言的链接规则来处理所有代码。</p>
<figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">__cplusplus  </span><span class="token comment">// 如果是在 c++ 环境下，会查询是否定义了宏 __cplusplus</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">extern</span> <span class="token string">"C"</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// ... code</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">__cplusplus  </span><span class="token comment">// 相当于在代码外围添加了一层</span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span></pre></td></tr></table></figure><h3 id="一段代码运行在哪个-c-语言版本"><a class="anchor" href="#一段代码运行在哪个-c-语言版本">#</a> 一段代码运行在哪个 C 语言版本？</h3>
<p>要确定代码是针对哪个 C 语言标准编写的，可以通过检查编译器定义的  <code>__STDC_VERSION__</code>  宏来实现。这个宏在编译时包含了一个版本号，代表了编译器支持的 C 标准的具体版本。</p>
<p>例如，如果  <code>__STDC_VERSION__</code>  的值为  <code>201710L</code> ，则表示编译器支持 C17 标准。</p>
<p>需要注意的是， <code>__STDC_VERSION__</code>  宏在不同的编译器中可能有不同的支持情况。例如，在 MinGW 编译器中可以正常使用，而在 MSVC 编译器中可能不被识别或支持。</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> __STDC_VERSION__<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">__STDC_VERSION__ <span class="token operator">>=</span> <span class="token number">201710</span></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"C17!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">__STDC_VERSION__ <span class="token operator">>=</span> <span class="token number">201112</span></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"C11!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">__STDC_VERSION__ <span class="token operator">>=</span> <span class="token number">199901</span></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"C99!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"maybe C90?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="代码运行的环境"><a class="anchor" href="#代码运行的环境">#</a> 代码运行的环境？</h3>
<p>识别代码运行的操作系统平台是跨平台软件开发中的一个重要方面。这可以通过预处理器的条件编译指令来实现，这些指令能够检测操作系统特有的宏定义。</p>
<p>在 Windows 平台上，通常定义了  <code>_WIN32</code>  或  <code>_WIN64</code>  宏。在 Linux 上，可能会定义  <code>linux</code>  或  <code>__linux__</code>  宏。而在 Mac OS 上， <code>__APPLE__</code>  宏被定义，并且通常伴随着  <code>__MACH__</code>  宏。利用这些宏，可以编写条件编译代码。</p>
<div class="tags"><a href="/tags/c/" rel="tag"><i class="ic i-tag"></i>C</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于 </span><time title="修改时间：2024-12-11 16:21:35" itemprop="dateModified" datetime="2024-12-11T16:21:35+08:00">2024-12-11</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>樱小路七叶<i class="ic i-at"><em>@</em></i>Nana7ha's Café Stella</li><li class="link"><strong>本文链接：</strong><a href="https://cwlrin.wiki/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E5%A4%B4%E6%96%87%E4%BB%B6/" title="C 语言头文件">https://cwlrin.wiki/c-cpp/c-base/C 语言头文件/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E5%87%BD%E6%95%B0/" rel="prev" itemprop="url" title="C 语言函数" style="background-image: linear-gradient(to bottom right, #88cbd5, #82c9ac);"><span class="type">上一篇</span><span class="category"><i class="ic i-flag"></i>C 语言基础</span><h3>C 语言函数</h3></a></div><div class="item right"><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E6%95%B0%E7%BB%84/" rel="next" itemprop="url" title="C 语言数组" style="background-image: linear-gradient(to bottom right, #a09c92, #d6b588);"><span class="type">下一篇</span><span class="category"><i class="ic i-flag"></i>C 语言基础</span><h3>C 语言数组</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#c-%E8%AF%AD%E8%A8%80%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B"><span class="toc-number">1.</span> <span class="toc-text"> C 语言的编译过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%84%E5%A4%84%E7%90%86%E9%98%B6%E6%AE%B5"><span class="toc-number">1.1.</span> <span class="toc-text"> 预处理阶段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%84%E5%A4%84%E7%90%86%E6%8C%87%E4%BB%A4"><span class="toc-number">1.2.</span> <span class="toc-text"> 预处理指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%92%8C%E9%93%BE%E6%8E%A5%E9%94%99%E8%AF%AF"><span class="toc-number">1.3.</span> <span class="toc-text"> 编译和链接错误</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB"><span class="toc-number">2.</span> <span class="toc-text"> 文件包含</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%B4%E6%96%87%E4%BB%B6"><span class="toc-number">2.1.</span> <span class="toc-text"> 头文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%B4%E6%96%87%E4%BB%B6%E5%B1%95%E5%BC%80"><span class="toc-number">2.2.</span> <span class="toc-text"> 头文件展开</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A4%B4%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.</span> <span class="toc-text"> 自定义头文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8F%E5%87%BD%E6%95%B0"><span class="toc-number">3.</span> <span class="toc-text"> 宏函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8F%E5%87%BD%E6%95%B0%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">3.1.</span> <span class="toc-text"> 宏函数的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8F%E5%87%BD%E6%95%B0%E7%9A%84%E8%BF%9E%E7%BB%AD%E8%B0%83%E7%94%A8"><span class="toc-number">3.2.</span> <span class="toc-text"> 宏函数的连续调用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%A4%9A%E8%A1%8C%E5%AE%8F"><span class="toc-number">3.3.</span> <span class="toc-text"> 定义多行宏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.4.</span> <span class="toc-text"> 宏与函数的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E7%BC%96%E8%AF%91"><span class="toc-number">4.</span> <span class="toc-text"> 条件编译</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ifndef-ifdef-if"><span class="toc-number">4.1.</span> <span class="toc-text">  #ifndef ,  #ifdef ,  #if</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E5%AE%8F%E6%89%93%E5%8D%B0%E8%B0%83%E8%AF%95%E4%BF%A1%E6%81%AF"><span class="toc-number">4.2.</span> <span class="toc-text"> 利用宏打印调试信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E6%AE%B5%E4%BB%A3%E7%A0%81%E5%9C%A8-c-%E8%AF%AD%E8%A8%80%E4%B8%8B%E5%AE%9A%E4%B9%89%E8%BF%98%E6%98%AF%E5%9C%A8-c-%E8%AF%AD%E8%A8%80%E4%B8%8B%E5%AE%9A%E4%B9%89"><span class="toc-number">4.3.</span> <span class="toc-text"> 一段代码在 C 语言下定义还是在 C++ 语言下定义？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E6%AE%B5%E4%BB%A3%E7%A0%81%E8%BF%90%E8%A1%8C%E5%9C%A8%E5%93%AA%E4%B8%AA-c-%E8%AF%AD%E8%A8%80%E7%89%88%E6%9C%AC"><span class="toc-number">4.4.</span> <span class="toc-text"> 一段代码运行在哪个 C 语言版本？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E8%BF%90%E8%A1%8C%E7%9A%84%E7%8E%AF%E5%A2%83"><span class="toc-number">4.5.</span> <span class="toc-text"> 代码运行的环境？</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li ><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" rel="bookmark" title="C 语言数据类型">C 语言数据类型</a></li><li ><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E8%AF%AD%E5%8F%A5/" rel="bookmark" title="C 语言语句">C 语言语句</a></li><li ><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E5%87%BD%E6%95%B0/" rel="bookmark" title="C 语言函数">C 语言函数</a></li><li  class="active"><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E5%A4%B4%E6%96%87%E4%BB%B6/" rel="bookmark" title="C 语言头文件">C 语言头文件</a></li><li ><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E6%95%B0%E7%BB%84/" rel="bookmark" title="C 语言数组">C 语言数组</a></li><li ><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E5%AD%97%E7%AC%A6%E4%B8%B2/" rel="bookmark" title="C 语言字符串">C 语言字符串</a></li><li ><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E7%BB%93%E6%9E%84%E4%BD%93/" rel="bookmark" title="C 语言结构体">C 语言结构体</a></li><li ><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E6%8C%87%E9%92%88/" rel="bookmark" title="C语言指针">C语言指针</a></li><li ><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E2%80%94%E2%80%94%E9%93%BE%E8%A1%A8/" rel="bookmark" title="C 语言数据结构——链表">C 语言数据结构——链表</a></li><li ><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E2%80%94%E2%80%94%E6%A0%88/" rel="bookmark" title="C 语言数据结构——栈">C 语言数据结构——栈</a></li><li ><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E2%80%94%E2%80%94%E9%98%9F%E5%88%97/" rel="bookmark" title="C 语言数据结构——队列">C 语言数据结构——队列</a></li><li ><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E2%80%94%E2%80%94%E5%93%88%E5%B8%8C%E8%A1%A8/" rel="bookmark" title="C 语言数据结构——哈希表">C 语言数据结构——哈希表</a></li><li ><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E2%80%94%E2%80%94%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/" rel="bookmark" title="C 语言数据结构——二叉搜索树">C 语言数据结构——二叉搜索树</a></li><li ><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E6%8E%92%E5%BA%8F/" rel="bookmark" title="C 语言排序">C 语言排序</a></li><li ><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6%E6%B5%81/" rel="bookmark" title="C 语言文件流">C 语言文件流</a></li><li ><a href="/c-cpp/c-base/%E8%BF%9B%E7%A8%8B%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4/" rel="bookmark" title="进程虚拟内存空间">进程虚拟内存空间</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><img class="image" loading="lazy" decoding="async" itemprop="image" alt="樱小路七叶" src="/assets/avatar.jpg"/><p class="name" itemprop="name">樱小路七叶</p><div class="description" itemprop="description">技术与美日新月异</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">93</span><span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">13</span><span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">14</span><span class="name">标签</span></a></div></nav><div class="social"><a target="_blank" rel="noopener" href="https://github.com/cwlrin" class="item github" title="https:&#x2F;&#x2F;github.com&#x2F;cwlrin"><i class="ic i-github"></i></a><a target="_blank" rel="noopener" href="https://www.zhihu.com/people/ying-xiao-lu-qi-ye" class="item zhihu" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;ying-xiao-lu-qi-ye"><i class="ic i-zhihu"></i></a><a target="_blank" rel="noopener" href="https://music.163.com/#/user/home?id=411590211" class="item music" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;411590211"><i class="ic i-cloud-music"></i></a><a target="_blank" rel="noopener" href="https://space.bilibili.com/8013992" class="item bilibili" title="https:&#x2F;&#x2F;space.bilibili.com&#x2F;8013992"><i class="ic i-bilibili"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="#" onclick="return false;"><i class="ic i-user"></i>关于</a><ul class="submenu"><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于本站</a></li><li class="item"><a href="/admiration/" rel="section"><i class="ic i-coffee"></i>赞赏博主</a></li></ul></li><li class="item dropdown"><a href="#" onclick="return false;"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li></div></div></div></div><ul id="quick"><li class="prev pjax"><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E6%95%B0%E7%BB%84/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/c-cpp/c-base/C%20%E8%AF%AD%E8%A8%80%E5%87%BD%E6%95%B0/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"></div><div class="status"><div class="copyright">&copy; 2020 -<span itemprop="copyrightYear">2025</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">樱小路七叶 @ 七葉の喫茶ステラ</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">1.5m 字</span><span class="post-meta-divider"> | </span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">22:03</span></div><div class="powered-by">基于 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> & Theme.<a target="_blank" rel="noopener" href="https://github.com/theme-shoka-x/hexo-theme-shokaX/">ShokaX</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL = {
    ispost: true,
    path: `c-cpp/c-base/C 语言头文件/`,
    favicon: {
        show: `（●´3｀●）やれやれだぜ`,
        hide: `(´Д｀)大変だ！`
    },
    search: {
        placeholder: "文章搜索",
        empty: "关于 「 ${query} 」，什么也没搜到",
        stats: "${time} ms 内找到 ${hits} 条结果"
    },
    nocopy: "false",
    copyright: `复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。`,
    copy_tex: false,
    katex: false,
    mermaid: false,
    audio: undefined,
    fancybox: true,
    nocopy: false,
    outime: true,
    template: `<div class="note warning"><p><span class="label warning">文章时效性提示</span><br>这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。</p></div>`,
    quiz: {
        choice: `单选题`,
        multiple: `多选题`,
        true_false: `判断题`,
        essay: `问答题`,
        gap_fill: `填空题`,
        mistake: `错题备注`
    },
    ignores: [
        (uri) => uri.includes('#'),
        (uri) => new RegExp(LOCAL.path + '$').test(uri),
            []
    ]
};
</script><script src="https://s4.zstatic.net/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha384-k6YtvFUEIuEFBdrLKJ3YAUbBki333tj1CSUisai5Cswsg9wcLNaPzsTHDswp4Az8" crossorigin="anonymous" fetchpriority="high"></script><script src="https://s4.zstatic.net/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha384-ZvpUoO&#x2F;+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn&#x2F;6Z&#x2F;hRTt8+pR6L4N2" crossorigin="anonymous" fetchpriority="high"></script><script src="https://s4.zstatic.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha384-Zm+UU4tdcfAm29vg+MTbfu&#x2F;&#x2F;q5B&#x2F;lInMbMCr4T8c9rQFyOv6PlfQYpB5wItcXWe7" crossorigin="anonymous" fetchpriority="high"></script><script src="https://s4.zstatic.net/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" integrity="sha384-TOxsBplaL96&#x2F;QDWPIUg+ye3v89qSE3s22XNtJMmCeZEep3cVDmXy1zEfZvVv+y2m" crossorigin="anonymous" fetchpriority="high"></script><script src="/js/siteInit.js?v=0.4.20" type="module" fetchpriority="high" defer></script></body></html>